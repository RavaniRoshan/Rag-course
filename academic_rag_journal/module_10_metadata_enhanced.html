<!DOCTYPE html>

<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Academic RAG Journal - Module 10: Metadata Enhancement</title>
<!-- Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&amp;family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;family=Geist+Mono:wght@100..900&amp;family=JetBrains+Mono:wght@100..800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries,typography"></script>
<!-- Theme Config -->
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#b80f12",
                        "ink": "#2C2420",
                        "paper": "#F9F7F1",
                        "parchment": "#EBE6DA",
                        "graphite": "#8A817C",
                        "faded": "#D8D1C4",
                        "library-green": "#4A5D44",
                    },
                    fontFamily: {
                        "display": ["Newsreader", "serif"],
                        "serif": ["Lora", "serif"],
                        "mono": ["Geist Mono", "monospace"],
                        "code": ["JetBrains Mono", "monospace"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.125rem",
                        "lg": "0.25rem",
                        "xl": "0.5rem",
                        "full": "0.5rem"
                    },
                    backgroundImage: {
                        'grain': "url('data:image.svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22 opacity=%220.05%22/%3E%3C/svg%3E')",
                    }
                },
            },
        }
    </script>
<style>
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #F9F7F1;
        }
        ::-webkit-scrollbar-thumb {
            background: #D8D1C4;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #8A817C;
        }

        /* Hide scrollbar for clean UI but allow scroll */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Typography overrides */
        .prose-academic p {
            margin-top: 1.5em;
            margin-bottom: 1.5em;
            line-height: 1.8;
            font-family: 'Lora', serif;
            font-size: 19px;
            color: #2C2420;
        }
        .prose-academic h2 {
            font-family: 'Newsreader', serif;
            font-weight: 600;
            color: #2C2420;
            margin-top: 2em;
            font-size: 32px;
            letter-spacing: -0.01em;
        }
        .prose-academic h3 {
            font-family: 'Newsreader', serif;
            font-weight: 600;
            color: #2C2420;
            margin-top: 1.5em;
            font-size: 24px;
        }

        /* Sepia Code Theme */
        .token.comment { color: #8A817C; font-style: italic; }
        .token.function { color: #9E2A2B; }
        .token.keyword { color: #b80f12; font-weight: bold; }
        .token.string { color: #4A5D44; }
        .token.number { color: #b80f12; }
        
        /* Marginalia hover effect */
        .marginalia-item {
            transition: transform 0.2s ease;
        }
        .marginalia-item:hover {
            transform: translateX(-4px);
        }
        
        /* Mermaid diagram styling */
        .mermaid-diagram {
            background: white;
            border: 1px solid #D8D1C4;
            border-radius: 4px;
            padding: 16px;
            margin: 20px 0;
        }
    </style>
</head>
<body class="bg-paper text-ink antialiased selection:bg-primary/20 selection:text-ink min-h-screen flex flex-col font-serif relative">
<!-- Grain Texture Overlay -->
<div class="fixed inset-0 pointer-events-none z-50 bg-grain mix-blend-multiply opacity-40"></div>
<!-- Top Navigation (Minimal) -->
<header class="sticky top-0 z-40 w-full border-b border-faded bg-paper/95 backdrop-blur-sm h-14 flex items-center justify-between px-6 lg:px-10">
<div class="flex items-center gap-4">
<a class="flex items-center gap-2 text-ink hover:text-primary transition-colors group" href="index.html">
<span class="material-symbols-outlined text-[20px] group-hover:-translate-x-1 transition-transform">arrow_back</span>
<span class="font-display font-medium text-lg tracking-tight">Syllabus</span>
</a>
<div class="h-4 w-px bg-faded mx-2"></div>
<span class="font-mono text-xs uppercase tracking-wider text-graphite">Module 10</span>
</div>
<div class="flex items-center gap-6">
<div class="hidden md:flex items-center gap-2 text-graphite text-xs font-mono">
<span class="material-symbols-outlined text-[16px]">schedule</span>
<span id="reading-time">45 min read</span>
</div>
<div class="flex gap-3">
<button id="search-btn" aria-label="Search" class="flex items-center justify-center size-8 rounded hover:bg-parchment transition-colors text-ink">
<span class="material-symbols-outlined text-[20px]">search</span>
</button>
<button aria-label="Settings" class="flex items-center justify-center size-8 rounded hover:bg-parchment transition-colors text-ink">
<span class="material-symbols-outlined text-[20px]">text_fields</span>
</button>
</div>
</div>
</header>
<!-- Main Content Layout -->
<main class="flex-1 flex justify-center w-full relative">
<div class="w-full max-w-[1440px] flex flex-row">
<!-- Left Rail: Table of Contents -->
<aside class="hidden lg:flex w-[240px] flex-col sticky top-14 h-[calc(100vh-3.5rem)] border-r border-faded overflow-y-auto pt-12 pb-10 pl-10 pr-6">
<nav class="flex flex-col gap-8">
<div>
<h4 class="font-mono text-xs uppercase tracking-widest text-graphite mb-4">Contents</h4>
<ul class="flex flex-col gap-3 font-mono text-[13px] leading-relaxed">
<li>
<a class="text-ink hover:text-primary transition-colors flex items-start gap-2 group" href="#introduction">
<span class="text-primary font-medium opacity-0 group-hover:opacity-100 transition-opacity absolute -left-4">→</span>
                                    Introduction
                                </a>
</li>
<li>
<a class="text-ink hover:text-primary transition-colors flex items-start gap-2 group" href="#metadata-types">
<span class="text-primary font-medium opacity-0 group-hover:opacity-100 transition-opacity absolute -left-4">→</span>
                                    Metadata Types
                                </a>
</li>
<li>
<a class="text-ink hover:text-primary transition-colors flex items-start gap-2 group" href="#metadata-extraction">
<span class="text-primary font-medium opacity-0 group-hover:opacity-100 transition-opacity absolute -left-4">→</span>
                                    Extraction Techniques
                                </a>
</li>
<li>
<a class="text-ink hover:text-primary transition-colors flex items-start gap-2 group" href="#metadata-enhancement">
<span class="text-primary font-medium opacity-0 group-hover:opacity-100 transition-opacity absolute -left-4">→</span>
                                    Enhancement Methods
                                </a>
</li>
<li>
<a class="text-ink hover:text-primary transition-colors flex items-start gap-2 group" href="#implementation-patterns">
<span class="text-primary font-medium opacity-0 group-hover:opacity-100 transition-opacity absolute -left-4">→</span>
                                    Implementation Patterns
                                </a>
</li>
</ul>
</div>
<div class="mt-auto pt-8 border-t border-faded">
<div class="flex flex-col gap-2">
<span class="font-mono text-[11px] uppercase tracking-widest text-graphite">Progress</span>
<div class="w-full bg-parchment h-1 rounded-full overflow-hidden">
<div class="bg-primary h-full w-[35%]"></div>
</div>
<span class="font-mono text-xs text-ink text-right">35%</span>
</div>
</div>
</nav>
</aside>
<!-- Center Stage: The Reader -->
<article class="flex-1 max-w-[720px] mx-auto pt-16 pb-32 px-6 md:px-12 min-h-screen">
<!-- Module Header -->
<header class="mb-16 border-b border-faded pb-12">
<div class="flex items-center gap-3 mb-6">
<span class="font-mono text-sm font-medium text-primary px-2 py-1 bg-primary/10 rounded">Module 10</span>
<span class="font-mono text-sm text-graphite">Advanced RAG Architectures</span>
</div>
<h1 class="font-display text-[48px] md:text-[56px] leading-[1.1] font-semibold text-ink tracking-tight mb-6">
                        Metadata Enhancement &amp; Enrichment
                    </h1>
<p class="font-serif text-xl text-ink/80 leading-relaxed max-w-[90%]">
                        Enhancing document metadata for improved retrieval through entity linking, topic modeling, and semantic enrichment.
                    </p>
</header>
<!-- Content Body -->
<div class="prose-academic">
<h2 id="introduction">Introduction to Metadata Enhancement</h2>
<p>
Metadata enhancement is a critical component of advanced RAG systems that enriches document representations with structured information to improve retrieval accuracy and relevance. By augmenting documents with rich metadata, we can enable more sophisticated filtering, ranking, and contextual understanding in the retrieval process.
</p>

<div class="my-10 border border-faded bg-parchment/50 p-6 rounded-sm">
<figure>
<img alt="Metadata Enhancement Process" class="w-full h-auto mix-blend-multiply mb-4 filter sepia-[0.3]" data-alt="Visualization showing how document content is enriched with metadata tags" src="https://placehold.co/600x300/f9f7f1/ebe6da?text=Metadata+Enhancement" />
<figcaption class="font-mono text-xs text-graphite text-center mt-2">Figure 1: Metadata Enhancement Process</figcaption>
</figure>
</div>

<h2 id="metadata-types">Types of Metadata</h2>
<p>
Metadata can be categorized into several types, each serving different purposes in the RAG pipeline:
</p>

<h3>Descriptive Metadata</h3>
<p>
Descriptive metadata provides information about the content and context of documents, including:
</p>
<ul class="list-disc pl-6 my-6">
<li><strong>Title</strong>: Document titles and headings</li>
<li><strong>Author</strong>: Creator or contributor information</li>
<li><strong>Keywords</strong>: Important terms and concepts</li>
<li><strong>Abstract</strong>: Brief summary of content</li>
<li><strong>Subject</strong>: Topic categories and classifications</li>
</ul>

<h3>Structural Metadata</h3>
<p>
Structural metadata describes the organization and composition of documents:
</p>
<ul class="list-disc pl-6 my-6">
<li><strong>Section hierarchy</strong>: Document structure and organization</li>
<li><strong>Page numbers</strong>: Position within document</li>
<li><strong>Format</strong>: Document type and layout</li>
<li><strong>Relationships</strong>: Links between document parts</li>
</ul>

<h3>Administrative Metadata</h3>
<p>
Administrative metadata contains information about document management:
</p>
<ul class="list-disc pl-6 my-6">
<li><strong>Creation date</strong>: When document was created</li>
<li><strong>Modification date</strong>: Last update timestamp</li>
<li><strong>Access rights</strong>: Permissions and restrictions</li>
<li><strong>Version</strong>: Document iteration information</li>
</ul>

<div class="not-prose my-12 border border-faded bg-parchment rounded-sm overflow-hidden">
<div class="flex items-center justify-between px-4 py-2 border-b border-faded bg-[#e6dfd1]">
<span class="font-mono text-xs text-ink">metadata_schema.py</span>
<div class="flex gap-2">
<span class="text-[10px] font-mono text-graphite uppercase">Python</span>
<button class="text-graphite hover:text-primary transition-colors" onclick="copyCode(this)">
<span class="material-symbols-outlined text-[16px]">content_copy</span>
</button>
</div>
</div>
<div class="p-5 overflow-x-auto">
<pre class="font-code text-[13px] leading-6"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<span class="token punctuation">,</span> Dict<span class="token punctuation">,</span> Any<span class="token punctuation">,</span> Optional
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token keyword">from</span> dataclasses <span class="token keyword">import</span> dataclass<span class="token punctuation">,</span> field

<span class="token decorator">@dataclass</span>
<span class="token keyword">class</span> <span class="token class-name">DocumentMetadata</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    Comprehensive metadata schema for RAG documents
    """</span>
    <span class="token comment"># Descriptive metadata</span>
    title<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    authors<span class="token punctuation">:</span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">(</span>default_factory<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">)</span>
    keywords<span class="token punctuation">:</span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">(</span>default_factory<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">)</span>
    abstract<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    topics<span class="token punctuation">:</span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">(</span>default_factory<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">)</span>
    
    <span class="token comment"># Structural metadata</span>
    section_hierarchy<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">(</span>default_factory<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">)</span>
    page_number<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>int<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    document_format<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    parent_document<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    
    <span class="token comment"># Administrative metadata</span>
    creation_date<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    modification_date<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>datetime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    access_rights<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    version<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    
    <span class="token comment"># Semantic metadata</span>
    entities<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">(</span>default_factory<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">)</span>
    sentiment<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>float<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    readability_score<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>float<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    language<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    
    <span class="token comment"># Custom metadata fields</span>
    custom_fields<span class="token punctuation">:</span> Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span> <span class="token operator">=</span> field<span class="token punctuation">(</span>default_factory<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">to_dict</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        Convert metadata to dictionary format
        """</span>
        <span class="token keyword">import</span> dataclasses
        <span class="token keyword">import</span> json
        
        result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">for</span> field <span class="token keyword">in</span> dataclasses.fields<span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            value <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> field<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token keyword">if</span> value <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> isinstance<span class="token punctuation">(</span>value<span class="token punctuation">,</span> datetime<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    result<span class="token punctuation">[</span>field<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">.</span>isoformat<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    result<span class="token punctuation">[</span>field<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value
        
        <span class="token keyword">return</span> result
    
    <span class="token keyword">def</span> <span class="token function">update_from_dict</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> metadata_dict<span class="token punctuation">:</span> Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        Update metadata from dictionary
        """</span>
        <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> metadata_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token builtin">setattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span></code></pre>
</div>
</div>

<h2 id="metadata-extraction">Metadata Extraction Techniques</h2>
<p>
Metadata extraction involves automatically identifying and extracting relevant information from documents. Various techniques can be employed depending on the document type and available information.
</p>

<h3>Named Entity Recognition</h3>
<p>
Named Entity Recognition (NER) identifies and classifies entities in text such as people, organizations, locations, and domain-specific terms.
</p>

<div class="not-prose my-12 border border-faded bg-parchment rounded-sm overflow-hidden">
<div class="flex items-center justify-between px-4 py-2 border-b border-faded bg-[#e6dfd1]">
<span class="font-mono text-xs text-ink">ner_extractor.py</span>
<div class="flex gap-2">
<span class="text-[10px] font-mono text-graphite uppercase">Python</span>
<button class="text-graphite hover:text-primary transition-colors" onclick="copyCode(this)">
<span class="material-symbols-outlined text-[16px]">content_copy</span>
</button>
</div>
</div>
<div class="p-5 overflow-x-auto">
<pre class="font-code text-[13px] leading-6"><code class="language-python"><span class="token keyword">import</span> spacy
<span class="token keyword">from</span> typing <span class="token keyword">import</span> List<span class="token punctuation">,</span> Dict<span class="token punctuation">,</span> Any

<span class="token keyword">class</span> <span class="token class-name">NERExtractor</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> model_name<span class="token punctuation">:</span> str <span class="token operator">=</span> <span class="token string">"en_core_web_sm"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>nlp <span class="token operator">=</span> spacy<span class="token punctuation">.</span>load<span class="token punctuation">(</span>model_name<span class="token punctuation">)</span>
        <span class="token keyword">except</span> OSError<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">f"Model {model_name} not found. Install with: python -m spacy download {model_name}"</span><span class="token punctuation">)</span>
            <span class="token keyword">raise</span>
    
    <span class="token keyword">def</span> <span class="token function">extract_entities</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># Process the text with spaCy</span>
        doc <span class="token operator">=</span> self<span class="token punctuation">.</span>nlp<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
        
        entities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> ent <span class="token keyword">in</span> doc<span class="token punctuation">.</span>ents<span class="token punctuation">:</span>
            entities<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">'text'</span><span class="token punctuation">:</span> ent<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
                <span class="token string">'label'</span><span class="token punctuation">:</span> ent<span class="token punctuation">.</span>label_<span class="token punctuation">,</span>
                <span class="token string">'start'</span><span class="token punctuation">:</span> ent<span class="token punctuation">.</span>start_char<span class="token punctuation">,</span>
                <span class="token string">'end'</span><span class="token punctuation">:</span> ent<span class="token punctuation">.</span>end_char<span class="token punctuation">,</span>
                <span class="token string">'description'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>_get_entity_description<span class="token punctuation">(</span>ent<span class="token punctuation">.</span>label_<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> entities
    
    <span class="token keyword">def</span> <span class="token function">_get_entity_description</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> label<span class="token punctuation">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> str<span class="token punctuation">:</span>
        descriptions <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">"PERSON"</span><span class="token punctuation">:</span> <span class="token string">"People, including fictional"</span><span class="token punctuation">,</span>
            <span class="token string">"NORP"</span><span class="token punctuation">:</span> <span class="token string">"Nationalities or religious or political groups"</span><span class="token punctuation">,</span>
            <span class="token string">"FAC"</span><span class="token punctuation">:</span> <span class="token string">"Buildings, airports, highways, bridges, etc."</span><span class="token punctuation">,</span>
            <span class="token string">"ORG"</span><span class="token punctuation">:</span> <span class="token string">"Companies, agencies, institutions, etc."</span><span class="token punctuation">,</span>
            <span class="token string">"GPE"</span><span class="token punctuation">:</span> <span class="token string">"Countries, cities, states"</span><span class="token punctuation">,</span>
            <span class="token string">"LOC"</span><span class="token punctuation">:</span> <span class="token string">"Non-GPE locations, mountain ranges, bodies of water"</span><span class="token punctuation">,</span>
            <span class="token string">"PRODUCT"</span><span class="token punctuation">:</span> <span class="token string">"Objects, vehicles, foods, etc. (not services)"</span><span class="token punctuation">,</span>
            <span class="token string">"EVENT"</span><span class="token punctuation">:</span> <span class="token string">"Named hurricanes, battles, wars, sports events, etc."</span><span class="token punctuation">,</span>
            <span class="token string">"WORK_OF_ART"</span><span class="token punctuation">:</span> <span class="token string">"Titles of books, songs, etc."</span><span class="token punctuation">,</span>
            <span class="token string">"LAW"</span><span class="token punctuation">:</span> <span class="token string">"Named documents made into laws"</span><span class="token punctuation">,</span>
            <span class="token string">"LANGUAGE"</span><span class="token punctuation">:</span> <span class="token string">"Any named language"</span><span class="token punctuation">,</span>
            <span class="token string">"DATE"</span><span class="token punctuation">:</span> <span class="token string">"Absolute or relative dates or periods"</span><span class="token punctuation">,</span>
            <span class="token string">"TIME"</span><span class="token punctuation">:</span> <span class="token string">"Times smaller than a day"</span><span class="token punctuation">,</span>
            <span class="token string">"PERCENT"</span><span class="token punctuation">:</span> <span class="token string">"Percentage, including %"</span><span class="token punctuation">,</span>
            <span class="token string">"MONEY"</span><span class="token punctuation">:</span> <span class="token string">"Monetary values, including unit"</span><span class="token punctuation">,</span>
            <span class="token string">"QUANTITY"</span><span class="token punctuation">:</span> <span class="token string">"Measurements, as of weight or distance"</span><span class="token punctuation">,</span>
            <span class="token string">"ORDINAL"</span><span class="token punctuation">:</span> <span class="token string">"First, second, etc."</span><span class="token punctuation">,</span>
            <span class="token string">"CARDINAL"</span><span class="token punctuation">:</span> <span class="token string">"Numerals that do not fall under another type"</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> descriptions<span class="token punctuation">.</span>get<span class="token punctuation">(</span>label<span class="token punctuation">,</span> <span class="token string">"Unknown entity type"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">extract_domain_entities</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">:</span> str<span class="token punctuation">,</span> domain_keywords<span class="token punctuation">:</span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># Extract domain-specific entities that may not be recognized by general NER</span>
        found_entities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        text_lower <span class="token operator">=</span> text<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">for</span> keyword <span class="token keyword">in</span> domain_keywords<span class="token punctuation">:</span>
            <span class="token keyword">if</span> keyword<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">in</span> text_lower<span class="token punctuation">:</span>
                found_entities<span class="token punctuation">.</span>append<span class="token punctuation">(</span>keyword<span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> found_entities</code></pre>
</div>
</div>

<h3>Topic Modeling</h3>
<p>
Topic modeling identifies themes and subjects within documents using techniques like Latent Dirichlet Allocation (LDA) or BERTopic.
</p>

<div class="not-prose my-12 border border-faded bg-parchment rounded-sm overflow-hidden">
<div class="flex items-center justify-between px-4 py-2 border-b border-faded bg-[#e6dfd1]">
<span class="font-mono text-xs text-ink">topic_modeler.py</span>
<div class="flex gap-2">
<span class="text-[10px] font-mono text-graphite uppercase">Python</span>
<button class="text-graphite hover:text-primary transition-colors" onclick="copyCode(this)">
<span class="material-symbols-outlined text-[16px]">content_copy</span>
</button>
</div>
</div>
<div class="p-5 overflow-x-auto">
<pre class="font-code text-[13px] leading-6"><code class="language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_extraction<span class="token punctuation">.</span>text <span class="token keyword">import</span> TfidfVectorizer
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>decomposition <span class="token keyword">import</span> LatentDirichletAllocation
<span class="token keyword">from</span> sentence_transformers <span class="token keyword">import</span> SentenceTransformer
<span class="token keyword">from</span> bertopic <span class="token keyword">import</span> BERTopic
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">class</span> <span class="token class-name">TopicModeler</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> method<span class="token punctuation">:</span> str <span class="token operator">=</span> <span class="token string">"lda"</span><span class="token punctuation">,</span> n_topics<span class="token punctuation">:</span> int <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>method <span class="token operator">=</span> method
        self<span class="token punctuation">.</span>n_topics <span class="token operator">=</span> n_topics
        
        <span class="token keyword">if</span> method <span class="token operator">==</span> <span class="token string">"lda"</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>vectorizer <span class="token operator">=</span> TfidfVectorizer<span class="token punctuation">(</span>
                max_features<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span>
                stop_words<span class="token operator">=</span><span class="token string">'english'</span><span class="token punctuation">,</span>
                ngram_range<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>lda <span class="token operator">=</span> LatentDirichletAllocation<span class="token punctuation">(</span>
                n_components<span class="token operator">=</span>n_topics<span class="token punctuation">,</span>
                random_state<span class="token operator">=</span><span class="token number">42</span>
            <span class="token punctuation">)</span>
        <span class="token keyword">elif</span> method <span class="token operator">==</span> <span class="token string">"bertopic"</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>model <span class="token operator">=</span> BERTopic<span class="token punctuation">(</span>nr_topics<span class="token operator">=</span>n_topics<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> method <span class="token operator">==</span> <span class="token string">"sentence_transformer"</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>embedder <span class="token operator">=</span> SentenceTransformer<span class="token punctuation">(</span><span class="token string">"all-MiniLM-L6-v2"</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">extract_topics_lda</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> documents<span class="token punctuation">:</span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># Fit the vectorizer and LDA model</span>
        tfidf_matrix <span class="token operator">=</span> self<span class="token punctuation">.</span>vectorizer<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>documents<span class="token punctuation">)</span>
        lda_output <span class="token operator">=</span> self<span class="token punctuation">.</span>lda<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>tfidf_matrix<span class="token punctuation">)</span>
        
        <span class="token comment"># Get feature names</span>
        feature_names <span class="token operator">=</span> self<span class="token punctuation">.</span>vectorizer<span class="token punctuation">.</span>get_feature_names_out<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># Extract top words for each topic</span>
        topics <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> topic_idx<span class="token punctuation">,</span> topic <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>lda<span class="token punctuation">.</span>components_<span class="token punctuation">)</span><span class="token punctuation">:</span>
            top_word_indices <span class="token operator">=</span> topic<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>  <span class="token comment"># Top 10 words</span>
            top_words <span class="token operator">=</span> <span class="token punctuation">[</span>feature_names<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> top_word_indices<span class="token punctuation">]</span>
            
            topics<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">'topic_id'</span><span class="token punctuation">:</span> topic_idx<span class="token punctuation">,</span>
                <span class="token string">'keywords'</span><span class="token punctuation">:</span> top_words<span class="token punctuation">,</span>
                <span class="token string">'dominant_topic'</span><span class="token punctuation">:</span> <span class="token boolean">True</span>  <span class="token comment"># Placeholder</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> topics
    
    <span class="token keyword">def</span> <span class="token function">extract_topics_bertopic</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> documents<span class="token punctuation">:</span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># Fit BERTopic model</span>
        topics<span class="token punctuation">,</span> probs <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>documents<span class="token punctuation">)</span>
        
        <span class="token comment"># Get topic info</span>
        topic_info <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">.</span>get_topic_info<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># Format topics</span>
        formatted_topics <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> _, row <span class="token keyword">in</span> topic_info<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            formatted_topics<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">'topic_id'</span><span class="token punctuation">:</span> row<span class="token punctuation">[</span><span class="token string">'Topic'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'keywords'</span><span class="token punctuation">:</span> row<span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split_<span class="token punctuation">(</span><span class="token string">"_"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">'dominant_topic'</span><span class="token punctuation">:</span> <span class="token boolean">True</span>  <span class="token comment"># Placeholder</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> formatted_topics
    
    <span class="token keyword">def</span> <span class="token function">extract_topics</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> documents<span class="token punctuation">:</span> List<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"lda"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>extract_topics_lda<span class="token punctuation">(</span>documents<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"bertopic"</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>extract_topics_bertopic<span class="token punctuation">(</span>documents<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> <span class="token builtin">ValueError</span><span class="token punctuation">(</span><span class="token string">f"Unsupported method: {self.method}"</span><span class="token punctuation">)</span></code></pre>
</div>
</div>

<h2 id="metadata-enhancement">Metadata Enhancement Methods</h2>
<p>
Metadata enhancement involves enriching existing metadata with additional information to improve retrieval and understanding.
</p>

<h3>Entity Linking</h3>
<p>
Entity linking connects extracted entities to knowledge bases like Wikidata or domain-specific ontologies.
</p>

<div class="not-prose my-12 border border-faded bg-parchment rounded-sm overflow-hidden">
<div class="flex items-center justify-between px-4 py-2 border-b border-faded bg-[#e6dfd1]">
<span class="font-mono text-xs text-ink">entity_linker.py</span>
<div class="flex gap-2">
<span class="text-[10px] font-mono text-graphite uppercase">Python</span>
<button class="text-graphite hover:text-primary transition-colors" onclick="copyCode(this)">
<span class="material-symbols-outlined text-[16px]">content_copy</span>
</button>
</div>
</div>
<div class="p-5 overflow-x-auto">
<pre class="font-code text-[13px] leading-6"><code class="language-python"><span class="token keyword">import</span> requests
<span class="token keyword">from</span> typing <span class="token keyword">import</span> List<span class="token punctuation">,</span> Dict<span class="token punctuation">,</span> Any<span class="token punctuation">,</span> Optional

<span class="token keyword">class</span> <span class="token class-name">EntityLinker</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> knowledge_base_url<span class="token punctuation">:</span> str <span class="token operator">=</span> <span class="token string">"https://www.wikidata.org/w/api.php"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>kb_url <span class="token operator">=</span> knowledge_base_url
    
    <span class="token keyword">def</span> <span class="token function">link_entities</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> entities<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span>str<span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token comment"># Link each entity to knowledge base</span>
        linked_entities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        
        <span class="token keyword">for</span> entity <span class="token keyword">in</span> entities<span class="token punctuation">:</span>
            linked_entity <span class="token operator">=</span> entity<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment"># Search for entity in knowledge base</span>
            kb_id<span class="token punctuation">,</span> description <span class="token operator">=</span> self<span class="token punctuation">.</span>search_knowledge_base<span class="token punctuation">(</span>entity<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> entity<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            
            <span class="token keyword">if</span> kb_id<span class="token punctuation">:</span>
                linked_entity<span class="token punctuation">[</span><span class="token string">'linked_id'</span><span class="token punctuation">]</span> <span class="token operator">=</span> kb_id
                linked_entity<span class="token punctuation">[</span><span class="token string">'linked_description'</span><span class="token punctuation">]</span> <span class="token operator">=</span> description
            
            linked_entities<span class="token punctuation">.</span>append<span class="token punctuation">(</span>linked_entity<span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> linked_entities
    
    <span class="token keyword">def</span> <span class="token function">search_knowledge_base</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> entity_text<span class="token punctuation">:</span> str<span class="token punctuation">,</span> entity_type<span class="token punctuation">:</span> str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> tuple<span class="token punctuation">:</span>
        <span class="token comment"># Query Wikidata API for entity</span>
        params <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'action'</span><span class="token punctuation">:</span> <span class="token string">'wbsearchentities'</span><span class="token punctuation">,</span>
            <span class="token string">'search'</span><span class="token punctuation">:</span> entity_text<span class="token punctuation">,</span>
            <span class="token string">'language'</span><span class="token punctuation">:</span> <span class="token string">'en'</span><span class="token punctuation">,</span>
            <span class="token string">'format'</span><span class="token punctuation">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
            <span class="token string">'limit'</span><span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>kb_url<span class="token punctuation">,</span> params<span class="token operator">=</span>params<span class="token punctuation">)</span>
            response<span class="token punctuation">.</span>raise_for_status<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            data <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token keyword">if</span> data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                result <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'search'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                <span class="token keyword">return</span> result<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'description'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> <span class="token builtin">Exception</span> <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">f"Error querying knowledge base: {e}"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">''</span>
    
    <span class="token keyword">def</span> <span class="token function">enhance_with_linked_data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> metadata<span class="token punctuation">:</span> DocumentMetadata<span class="token punctuation">,</span> text<span class="token punctuation">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> DocumentMetadata<span class="token punctuation">:</span>
        <span class="token comment"># Extract entities from text</span>
        ner_extractor <span class="token operator">=</span> NERExtractor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        entities <span class="token operator">=</span> ner_extractor<span class="token punctuation">.</span>extract_entities<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
        
        <span class="token comment"># Link entities to knowledge base</span>
        linked_entities <span class="token operator">=</span> self<span class="token punctuation">.</span>link_entities<span class="token punctuation">(</span>entities<span class="token punctuation">)</span>
        
        <span class="token comment"># Update metadata with linked entities</span>
        metadata<span class="token punctuation">.</span>entities <span class="token operator">=</span> linked_entities
        
        <span class="token keyword">return</span> metadata</code></pre>
</div>
</div>

<h2 id="implementation-patterns">Implementation Patterns</h2>
<p>
Effective metadata enhancement follows certain patterns to ensure consistency and maintainability.
</p>

<h3>Metadata Pipeline</h3>
<p>
A metadata pipeline processes documents through multiple enhancement stages:
</p>

<div class="not-prose my-12 border border-faded bg-parchment rounded-sm overflow-hidden">
<div class="flex items-center justify-between px-4 py-2 border-b border-faded bg-[#e6dfd1]">
<span class="font-mono text-xs text-ink">metadata_pipeline.py</span>
<div class="flex gap-2">
<span class="text-[10px] font-mono text-graphite uppercase">Python</span>
<button class="text-graphite hover:text-primary transition-colors" onclick="copyCode(this)">
<span class="material-symbols-outlined text-[16px]">content_copy</span>
</button>
</div>
</div>
<div class="p-5 overflow-x-auto">
<pre class="font-code text-[13px] leading-6"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Callable

<span class="token keyword">class</span> <span class="token class-name">MetadataPipeline</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>steps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token keyword">def</span> <span class="token function">add_step</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> step<span class="token punctuation">:</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>DocumentMetadata<span class="token punctuation">,</span> str<span class="token punctuation">]</span><span class="token punctuation">,</span> DocumentMetadata<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>steps<span class="token punctuation">.</span>append<span class="token punctuation">(</span>step<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> metadata<span class="token punctuation">:</span> DocumentMetadata<span class="token punctuation">,</span> text<span class="token punctuation">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> DocumentMetadata<span class="token punctuation">:</span>
        <span class="token keyword">for</span> step <span class="token keyword">in</span> self<span class="token punctuation">.</span>steps<span class="token punctuation">:</span>
            metadata <span class="token operator">=</span> step<span class="token punctuation">(</span>metadata<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
        <span class="token keyword">return</span> metadata

<span class="token comment"># Example usage</span>
<span class="token keyword">def</span> <span class="token function">extract_ner</span><span class="token punctuation">(</span>metadata<span class="token punctuation">:</span> DocumentMetadata<span class="token punctuation">,</span> text<span class="token punctuation">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> DocumentMetadata<span class="token punctuation">:</span>
    ner <span class="token operator">=</span> NERExtractor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    entities <span class="token operator">=</span> ner<span class="token punctuation">.</span>extract_entities<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    metadata<span class="token punctuation">.</span>entities <span class="token operator">=</span> entities
    <span class="token keyword">return</span> metadata

<span class="token keyword">def</span> <span class="token function">extract_topics</span><span class="token punctuation">(</span>metadata<span class="token punctuation">:</span> DocumentMetadata<span class="token punctuation">,</span> text<span class="token punctuation">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> DocumentMetadata<span class="token punctuation">:</span>
    topic_modeler <span class="token operator">=</span> TopicModeler<span class="token punctuation">(</span>n_topics<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
    topics <span class="token operator">=</span> topic_modeler<span class="token punctuation">.</span>extract_topics<span class="token punctuation">(</span><span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">)</span>
    metadata<span class="token punctuation">.</span>topics <span class="token operator">=</span> <span class="token punctuation">[</span>topic<span class="token punctuation">[</span><span class="token string">'keywords'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> topic <span class="token keyword">in</span> topics<span class="token punctuation">]</span>
    <span class="token keyword">return</span> metadata

<span class="token comment"># Create and configure pipeline</span>
pipeline <span class="token operator">=</span> MetadataPipeline<span class="token punctuation">(</span><span class="token punctuation">)</span>
pipeline<span class="token punctuation">.</span>add_step<span class="token punctuation">(</span>extract_ner<span class="token punctuation">)</span>
pipeline<span class="token punctuation">.</span>add_step<span class="token punctuation">(</span>extract_topics<span class="token punctuation">)</span>

<span class="token comment"># Use pipeline</span>
<span class="token comment"># enhanced_metadata = pipeline.run(initial_metadata, document_text)</span></code></pre>
</div>
</div>

</div>
<!-- Footer / Pagination -->
<div class="mt-24 pt-10 border-t border-faded flex justify-between items-center group/footer">
<a class="flex flex-col items-start gap-2 hover:bg-parchment/50 p-4 -ml-4 rounded transition-colors w-1/2" href="module_09_evaluation_metrics.html">
<span class="font-mono text-xs text-graphite uppercase tracking-wider">Previous Module</span>
<span class="font-display text-lg font-medium text-ink flex items-center gap-2">
<span class="material-symbols-outlined text-[18px]">arrow_back</span>
                            Evaluation Metrics
                        </span>
</a>
<div class="h-12 w-px bg-faded mx-4"></div>
<a class="flex flex-col items-end gap-2 hover:bg-parchment/50 p-4 -mr-4 rounded transition-colors w-1/2" href="module_11_agentic_workflows.html">
<span class="font-mono text-xs text-graphite uppercase tracking-wider">Next Module</span>
<span class="font-display text-lg font-medium text-ink flex items-center gap-2">
                            Agentic Workflows
                            <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
</span>
</a>
</div>
</article>
<!-- Right Rail: Marginalia -->
<aside class="hidden xl:block w-[240px] sticky top-14 h-[calc(100vh-3.5rem)] pt-32 pb-10 pr-10 pl-4 overflow-y-auto">
<div class="flex flex-col gap-24 relative">
<!-- Note 1: Aligned with introduction -->
<div class="relative group cursor-pointer transition-transform hover:-translate-x-1">
<div class="absolute -left-3 top-1 text-[10px] font-bold text-primary font-mono">[1]</div>
<p class="font-mono text-[12px] leading-5 text-graphite group-hover:text-ink transition-colors">
<strong class="text-ink">Metadata enhancement</strong> significantly improves retrieval accuracy and relevance.
                        </p>
</div>
<!-- Note 2: Aligned with metadata types -->
<div class="relative group cursor-pointer transition-transform hover:-translate-x-1 mt-12">
<div class="absolute -left-3 top-1 text-[10px] font-bold text-primary font-mono">[2]</div>
<p class="font-mono text-[12px] leading-5 text-graphite group-hover:text-ink transition-colors">
<strong class="text-ink">Structured metadata</strong> enables sophisticated filtering and ranking in RAG systems.
                        </p>
<a class="inline-flex items-center gap-1 mt-2 text-[10px] uppercase tracking-widest text-primary font-bold hover:underline" href="artifact_view.html" target="_blank">
                            View Code <span class="material-symbols-outlined text-[10px]">open_in_new</span>
</a>
</div>
<!-- Note 3: Aligned with enhancement methods -->
<div class="relative group cursor-pointer transition-transform hover:-translate-x-1 mt-24">
<div class="absolute -left-3 top-1 text-[10px] font-bold text-primary font-mono">[3]</div>
<p class="font-mono text-[12px] leading-5 text-graphite group-hover:text-ink transition-colors">
                            <code class="bg-parchment px-0.5 rounded-sm">Entity linking</code> connects document content to external knowledge bases.
                        </p>
</div>
<!-- Additional marginalia for module-specific content -->
<div class="relative group cursor-pointer transition-transform hover:-translate-x-1 mt-16">
<div class="absolute -left-3 top-1 text-[10px] font-bold text-primary font-mono">[4]</div>
<p class="font-mono text-[12px] leading-5 text-graphite group-hover:text-ink transition-colors">
                            <strong class="text-ink">Topic modeling</strong> identifies thematic content for better organization.
                        </p>
</div>
<div class="relative group cursor-pointer transition-transform hover:-translate-x-1 mt-16">
<div class="absolute -left-3 top-1 text-[10px] font-bold text-primary font-mono">[5]</div>
<p class="font-mono text-[12px] leading-5 text-graphite group-hover:text-ink transition-colors">
                            <strong class="text-ink">Metadata pipelines</strong> ensure consistent processing across documents.
                        </p>
</div>
</div>
</aside>
</div>
</main>

<script>
    // Function to copy code to clipboard
    function copyCode(button) {
        const codeBlock = button.closest('.not-prose').querySelector('pre code');
        navigator.clipboard.writeText(codeBlock.textContent.trim()).then(() => {
            const originalIcon = button.querySelector('.material-symbols-outlined').textContent;
            button.querySelector('.material-symbols-outlined').textContent = 'check';
            setTimeout(() => {
                button.querySelector('.material-symbols-outlined').textContent = originalIcon;
            }, 2000);
        });
    }

    // Calculate reading time based on content
    document.addEventListener('DOMContentLoaded', function() {
        const content = document.querySelector('.prose-academic').textContent;
        const wordsPerMinute = 200; // Average reading speed
        const wordCount = content.split(/\s+/).length;
        const readingTime = Math.ceil(wordCount / wordsPerMinute);
        
        document.getElementById('reading-time').textContent = `${readingTime} min read`;
    });

    // Search button functionality
    document.getElementById('search-btn').addEventListener('click', function() {
        window.location.href = 'search_index.html';
    });
</script>
</body></html>